@using Syncfusion.EJ2
@using Syncfusion.EJ2.Grids

@*custom code start*@

@{
    ViewData["Title"] = "EmptyRecordTemplate";
}
@{
    ViewBag.DropDownData = new List<object>
{
        new { priority = "Low"},
        new { priority = "Medium" },
        new { priority = "High" },
        new { priority = "Critical" }
    };
    var DropDownList = new Syncfusion.EJ2.DropDowns.DropDownList() { DataSource = ViewBag.DropDownData, Query = "new ej.data.Query()", AllowFiltering = true, Fields = new Syncfusion.EJ2.DropDowns.DropDownListFieldSettings() { Value = "priority", Text = "priority" } };
}
@{
    ViewBag.DropDownData = new List<object>
{
        new { status = "Open"},
        new { status = "In progress" },
        new { status = "Review-Request" },
        new { status = "Review-Reject" },
        new { status = "Closed" }
    };
    var DropDownList1 = new Syncfusion.EJ2.DropDowns.DropDownList() { DataSource = ViewBag.DropDownData, Query = "new ej.data.Query()", AllowFiltering = true, Fields = new Syncfusion.EJ2.DropDowns.DropDownListFieldSettings() { Value = "status", Text = "status" } };
}
@*custom code end*@

@section ControlsSection{
    <div class="control-section">
        @Html.EJS().TreeGrid("EmptyRecordTemplate").AllowFiltering(true).FilterSettings(f => f.Type(Syncfusion.EJ2.TreeGrid.FilterType.Menu)).EmptyRecordTemplate("#emptyrecordtemplate").Columns(col =>
   {
       col.Field("taskID").HeaderText("Task ID").Width(120).TextAlign(TextAlign.Right).Type("number").IsPrimaryKey(true).ValidationRules(new { required = true, min = 0 }).Add();
       col.Field("taskName").HeaderText("Task Name").Width(120).TextAlign(TextAlign.Left).Type("string").ValidationRules(new { required = true }).Add();
       col.Field("priority").HeaderText("Priority").Width(100).TextAlign(TextAlign.Left).Type("string").EditType("dropdownedit").Edit(new { @params = DropDownList }).Add();

       col.Field("assignee").HeaderText("Assignee").Width(100).TextAlign(TextAlign.Left).Type("string").Add();

       col.Field("status").HeaderText("Status").Width(90).TextAlign(TextAlign.Left).EditType("dropdownedit").Edit(new { @params = DropDownList1 }).Add();
       col.Field("duration").HeaderText("Duration in Days").Width(150).TextAlign(TextAlign.Right).Type("number").EditType("numericedit").Add();
   }).ChildMapping("subtasks").DataBound("dataBound").ActionComplete("onActionComplete").Toolbar(new List<string>() { "Add", "Update", "Cancel", "Delete", "Search" }).EditSettings(edit =>
   {
       edit.AllowAdding(true).AllowDeleting(true);
   }).TreeColumnIndex(1).AllowPaging(true).Render()
    </div>

    <script>
        function dataBound() {
            var treegrid = document.getElementById("EmptyRecordTemplate").ej2_instances[0];
            var isGridEmpty = treegrid.flatData.length === 0;
            if (treegrid.searchSettings.key === '' || treegrid.searchSettings.key === undefined) {
                treegrid.toolbarModule.enableItems([treegrid.element.id + '_gridcontrol_searchbar'], !isGridEmpty);
            }
            var filterMenudivs = treegrid.element.querySelectorAll('.e-filtermenudiv');
            filterMenudivs.forEach((div) => {
                if (isGridEmpty && treegrid.grid.filterSettings.columns.length == 0) {
                    div.classList.add('e-disabled');
                    div.style.cursor = 'default';
                } else {
                    div.classList.remove('e-disabled');
                    div.style.removeProperty('cursor');
                }
            });

        }

        function onActionComplete(args) {
            var treegrid = document.getElementById("EmptyRecordTemplate").ej2_instances[0];


            // Toggle filter dialog based on visible records
            if (args.requestType === 'filterAfterOpen' && treegrid.flatData.length === 0) {
                if (args.filterModel.filterSettings.columns.length > 0 && args.filterModel.filterSettings.columns.some((col) => col.field === args.columnName)) {
                    args.filterModel.dlgObj.show();
                }
                else {
                    args.filterModel.dlgObj.hide();
                }
            }

            if ((args.requestType === 'delete' || args.requestType === 'searching') && treegrid.flatData.length === 0 && treegrid.searchSettings.key === '') {
                treegrid.toolbarModule.enableItems([treegrid.element.id + '_gridcontrol_searchbar'], false);
            }

            if (args.action === 'clearFilter' && treegrid.flatData.length !== 0) {
                treegrid.toolbarModule.enableItems([treegrid.element.id + '_gridcontrol_searchbar'], true);
            }
        }
    </script>

    <style>
        #EmptyRecordTemplate .emptyRecordTemplate {
            text-align: center;
            margin: 31px auto;
        }

        #EmptyRecordTemplate .e-emptyRecord {
            display: block;
            margin: 10px auto;
            border-radius: 4px;
            box-shadow: 2px 4px 10px #34343480;
        }
    </style>

    <script id="emptyrecordtemplate" type="text/x-template">
        <div class='emptyRecordTemplate'>
            <img src="https://ej2.syncfusion.com/angular/demos/assets/grid/images/emptyRecordTemplate_light.svg" alt="No record" className="e-emptyRecord" />
            <div><b>There is no data available to display at the moment.</b></div><br>

        </div>
    </script>
}

@*custom code start*@

@section Meta{
    <meta name="description" content="This example demonstrates the Empty Record Template in ASP.NET MVC Tree Grid control. Explore here for more details." />
}


@section ActionDescription{
    <div id="action-description">
        <p>This sample demonstrates the use of the empty record template in the Tree Grid. The <code>EmptyRecordTemplate</code> accepts either a string or an HTML element value, which will be used as the template when there is no data.</p>
    </div>
}

@section Description{
    <div id="description">
        <p> The Tree Grid provides a way to use custom content when it has no data to present. Custom content, such as images, text, or other components, can be used when the Tree Grid does not contain any records to display. This feature replaces the default message of "No records to display" typically shown in the Tree Grid.</p>
        <p>More information on the empty record template can be found in this <a target="_blank" href="https://ej2.syncfusion.com/aspnetmvc/documentation/tree-grid/overview"> documentation</a>  section.</p>
    </div>
}

@*custom code end*@
@section Title{
    <title>ASP.NET MVC Tree Grid Empty Record Template Example - Syncfusion Demos </title>
}
@section Header{
    <h1 class='sb-sample-text'>Example of Empty Record Template in ASP.NET MVC Tree Grid Control</h1>
}